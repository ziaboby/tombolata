module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s="QfWi")}({GFNa:function(e,t,n){},HteQ:function(e,t){e.exports=require("preact")},QP3f:function(e){e.exports=JSON.parse('{"private":true,"name":"cardgenerator","version":"1.0.1","license":"MIT","scripts":{"build":"preact build","serve":"sirv build --port 8080 --cors --single","dev":"preact watch","lint":"eslint src","test":"jest"},"eslintConfig":{"extends":"preact","ignorePatterns":["build/"]},"devDependencies":{"enzyme":"^3.10.0","enzyme-adapter-preact-pure":"^2.0.0","eslint":"^6.0.1","eslint-config-preact":"^1.1.0","jest":"^24.9.0","jest-preset-preact":"^1.0.0","preact-cli":"^3.0.0","sirv-cli":"1.0.3"},"dependencies":{"preact":"^10.3.2","preact-render-to-string":"^5.1.4","preact-router":"^3.2.1"},"jest":{"preset":"jest-preset-preact","setupFiles":["<rootDir>/tests/__mocks__/browserMocks.js","<rootDir>/tests/__mocks__/setupTests.js"]}}')},QfWi:function(e,t,n){"use strict";n.r(t);n("GFNa");var r,o,c,i=n("HteQ"),s=0,u=[],a=i.options.__b,l=i.options.__r,f=i.options.diffed,_=i.options.__c,p=i.options.unmount;function b(e,t){i.options.__h&&i.options.__h(o,e,s||t),s=0;var n=o.__H||(o.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function d(e,t,n){var c=b(r++,2);return c.t=e,c.__c||(c.__=[n?n(t):j(void 0,t),function(e){var t=c.t(c.__[0],e);c.__[0]!==t&&(c.__=[t,c.__[1]],c.__c.setState({}))}],c.__c=o),c.__}function m(e,t){var n=b(r++,7);return y(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function h(){u.forEach((function(e){if(e.__P)try{e.__H.__h.forEach(v),e.__H.__h.forEach(g),e.__H.__h=[]}catch(t){e.__H.__h=[],i.options.__e(t,e.__v)}})),u=[]}i.options.__b=function(e){o=null,a&&a(e)},i.options.__r=function(e){l&&l(e),r=0;var t=(o=e.__c).__H;t&&(t.__h.forEach(v),t.__h.forEach(g),t.__h=[])},i.options.diffed=function(e){f&&f(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==u.push(t)&&c===i.options.requestAnimationFrame||((c=i.options.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(r),O&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);O&&(t=requestAnimationFrame(n))})(h)),o=void 0},i.options.__c=function(e,t){t.some((function(e){try{e.__h.forEach(v),e.__h=e.__h.filter((function(e){return!e.__||g(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],i.options.__e(n,e.__v)}})),_&&_(e,t)},i.options.unmount=function(e){p&&p(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(v)}catch(e){i.options.__e(e,t.__v)}};var O="function"==typeof requestAnimationFrame;function v(e){var t=o;"function"==typeof e.__c&&e.__c(),o=t}function g(e){var t=o;e.__c=e.__(),o=t}function y(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function j(e,t){return"function"==typeof t?t(e):t}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=new Array(91).fill(""),P=Object.keys(S),T={1:[].concat(P.slice(1,10),S.slice(0,9)),10:[].concat(P.slice(10,20),S.slice(0,8)),20:[].concat(P.slice(20,30),S.slice(0,8)),30:[].concat(P.slice(30,40),S.slice(0,8)),40:[].concat(P.slice(40,50),S.slice(0,8)),50:[].concat(P.slice(50,60),S.slice(0,8)),60:[].concat(P.slice(60,70),S.slice(0,8)),70:[].concat(P.slice(70,80),S.slice(0,8)),80:[].concat(P.slice(80,91),S.slice(0,7))},M=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)},k=function(){for(var e={1:3,10:2,20:2,30:2,40:2,50:2,60:2,70:2,80:1},t=Object.keys(e).reduce((function(t,n){for(var r=T[n].filter((function(e){return""!==e})),o=0;o<6;o++)t[n]||(t[n]={singles:[],doubles:[]}),o<e[n]?function(){var e=r[M(0,r.length-1)];r=r.filter((function(t){return t!=e})),t[n].singles.push([e])}():function(){for(var e=r[M(0,r.length-1)],o=r[M(0,r.length-1)];o===e;)o=r[M(0,r.length-1)];r=r.filter((function(t){return t!=e&&t!=o})),t[n].doubles.push([e,o])}();return t}),{}),n=function(e,n){var r=t[e][n],o=M(0,r.length-1),c=r[o];return t[e][n]=t[e][n].filter((function(e,t){return t!==o})),c},r={},o=function(e){for(var o,c=Object.keys(t).filter((function(e){return(t[e].singles||[]).length})),i=Object.keys(t).filter((function(e){return(t[e].singles||[]).length>=2})),s=Object.keys(t).filter((function(e){return(t[e].doubles||[]).length})),u=i.length?i[M(0,i.length-1)]:c[M(0,c.length-1)],a=c[M(0,c.length-1)];a===u;)a=c[M(0,c.length-1)];for(var l=c[M(0,c.length-1)];l===u||l===a;)l=c[M(0,c.length-1)];r[e]=E(((o={})[u]=n(u,"singles"),o[a]=n(a,"singles"),o[l]=n(l,"singles"),o),s.reduce((function(e,t){var r;return[u,a,l].includes(t)?e:E(E({},e),{},((r={})[t]=n(t,"doubles"),r))}),{}))},c=1;c<=6;c++)o(c);for(var i={},s=1;s<=6;s++){i[s]||(i[s]=[]);for(var u=function(e){var t=r[s],n=Object.keys(t).filter((function(e){return 2===(t[e]||[]).length})),o=Object.keys(t).filter((function(e){return 1===(t[e]||[]).length}));if(1===e)i[s].push([r[s][n[0]].pop(),r[s][n[1]].pop(),r[s][n[2]].pop(),r[s][n[3]].pop(),r[s][n[4]].pop()]);else{for(var c=n.length?n[0]:o[M(0,o.length-1)],u=c,a=c,l=c,f=c;u===c;)u=o[M(0,o.length-1)];for(;[c,u].includes(a);)a=o[M(0,o.length-1)];for(;[c,u,a].includes(l);)l=o[M(0,o.length-1)];for(;[c,u,a,l].includes(f);)f=o[M(0,o.length-1)];i[s].push([r[s][c].pop(),r[s][u].pop(),r[s][a].pop(),r[s][l].pop(),r[s][f].pop()])}},a=1;a<=3;a++)u(a)}return Object.keys(i).map((function(e){return i[e]}))};function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){throw new TypeError('"'+e+'" is read-only')}var D={getItem:function(){},setItem:function(){}},A={pushState:function(){}};"undefined"!=typeof window&&(R("sessionStorage"),D=window.sessionStorage,R("history"),A=window.history);var C=D.getItem("tombolata"),B={cards:[],selectedNumbers:[],tomboloneFreeNumbers:[],tomboloneNewNumber:null,mode:""},W=C?JSON.parse(C):B;A.pushState(W,"","#"+(W.mode||""));var I=["cards","tombolone"],L=function(e,t){switch(t.type){case"RESTORE_STATE":return t.state?F({},t.state):e;case"RESET":return F(F({},e),{},{selectedNumbers:[],tomboloneFreeNumbers:e.tomboloneFreeNumbers.length?[].concat(e.cards[0],e.cards[1],e.cards[2]):B.tomboloneFreeNumbers});case"NEW_CARD":return F(F({},B),{},{mode:I[0],cards:k()});case"NEW_TOMBOLONE":var n=function(){for(var e=[],t=P.slice(1),n=0;n<3;n++){var r=30*n;e[n]=t.slice(r,r+30)}return e}();return F(F({},B),{},{mode:I[1],cards:n,tomboloneFreeNumbers:[].concat(n[0],n[1],n[2])});case"NEW_TOMBOLONE_NUMBER":if(!e.tomboloneFreeNumbers.length)return e;var r=M(0,e.tomboloneFreeNumbers.length-1),o=e.tomboloneFreeNumbers.slice(0),c=o.splice(r,1)[0];return F(F({},e),{},{tomboloneNewNumber:c,tomboloneFreeNumbers:o,selectedNumbers:[].concat(e.selectedNumbers,[c])});case"SELECT_NUMBER":return e.mode===I[1]?e:F(F({},e),{},{selectedNumbers:e.selectedNumbers.includes(t.number)?e.selectedNumbers.filter((function(e){return e!=t.number})):[].concat(e.selectedNumbers,[t.number])});default:throw new Error("Unexpected action")}},q=function(e,t){var n=L(e,t);return"RESET"===t.type?D.removeItem("tombolata"):D.setItem("tombolata",JSON.stringify(n)),A.pushState(n,"","#"+(n.mode||"")),n},Q=function(e){var t=e.dispatch;return Object(i.h)("section",{className:"card__controller"},Object(i.h)("button",{onClick:function(){t({type:"RESET"})}},"Reset"),Object(i.h)("button",{onClick:function(){t({type:"NEW_CARD",quantity:2})}},"New Cards"),Object(i.h)("button",{onClick:function(){t({type:"NEW_TOMBOLONE"})}},"New [TOMBOLONE]"))},U=function(e){var t=e.dispatch,n=e.number;return Object(i.h)("section",{className:"card__tombolone_number"},Object(i.h)("button",{onClick:function(){t({type:"NEW_TOMBOLONE_NUMBER"})}},"New number"),Object(i.h)("div",{id:"tombolone_number",className:"card__box"},n||""))},J=function(e){var t=e.dispatch,n=e.number,r=e.isSelected;return Object(i.h)("div",{className:"card__number"+(r?" card__number--selected":""),onClick:function(){t({type:"SELECT_NUMBER",number:n})}},n)},z=function(e){var t=e.numbers,n=e.dispatch,r=e.isSelected;return t.map((function(e){return Object(i.h)("li",{className:"card__box"},e?Object(i.h)(J,{dispatch:n,number:e,isSelected:r(e)}):null)}))},G=function(e){var t=e.dispatch,n=e.numbers,r=e.isSelected,o=m((function(){var e=new Array(27).fill(0);return n.forEach((function(t,n){t.forEach((function(t){var r=9*n+(t<10?0:90==t?8:parseInt((""+t)[0]));e[r]=t}))})),e}),[n]);return Object(i.h)("ul",{className:"card"},Object(i.h)(z,{numbers:o,dispatch:t,isSelected:r}))},K=function(e){var t=e.dispatch,n=e.numbers,r=e.isSelected;return Object(i.h)("ul",{className:"card card--tombolone"},Object(i.h)(z,{numbers:n,dispatch:t,isSelected:r}))},V=n("QP3f"),X=function(){var e,t,n,c,u,a=d(q,W),l=a[0],f=a[1],_=(e=function(e){return l.selectedNumbers.includes(e)},t=[l.selectedNumbers],s=8,m((function(){return e}),t)),p=l.mode===I[1];return n=function(){"undefined"!=typeof window&&(window.onpopstate=function(e){var t=e.state;f({type:"RESTORE_STATE",state:void 0===t?{}:t})})},c=[],u=b(r++,3),!i.options.__s&&y(u.__H,c)&&(u.__=n,u.__H=c,o.__H.__h.push(u)),Object(i.h)("div",{id:"app",className:"container"},Object(i.h)(Q,{dispatch:f}),p?Object(i.h)(U,{dispatch:f,number:l.tomboloneNewNumber}):null,Object(i.h)("section",{className:"card__list"},l.cards.map((function(e){return p?Object(i.h)(K,{dispatch:f,isSelected:_,numbers:e}):Object(i.h)(G,{dispatch:f,isSelected:_,numbers:e})}))),Object(i.h)("div",{style:{textAlign:"right",paddingRight:"20px",marginTop:"50px"}}," ",V.version," "))};t.default=X}});
//# sourceMappingURL=ssr-bundle.js.map